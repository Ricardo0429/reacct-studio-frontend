language: node_js
node_js:
- 12
install:
- npm i -g npm@5.8.0
- npm ci
branches:
  only:
  - master
  - "/v\\d+\\.\\d+\\.d+$/"
cache:
  directories:
  - "$HOME/.npm"
stages:
- PR checks ✅
- name: "Ship It \U0001F6A2"
  if: branch=master AND type=push
jobs:
  include:
  - stage: PR checks ✅
    env:
    - NAME=Unit Tests
    script: npm run test
    after_script:
    - codecov
  - stage: PR checks ✅
    env:
    - NAME=Validation Checks
    script: "./.travis/validate_changes_for_merge.sh"
  - stage: "Ship It \U0001F6A2"
    env:
    - NAME=Publish
    script: semantic-release
notifications:
  webhooks: https://www.travisbuddy.com/
  hipchat:
    rooms:
      secure: jLi64vC05Chtjofdqs2GwdsIoZJn2OE8Nk+TBqRGwAWkRQ6UVP9kbyxZYTB7y0Jr60x2grUs9m3sQycjZrAy0Me4ge+pfAuVhim98RiAVOUPeQGRJujXoIAR4xpB8FTMsmW3vGuAz5v5cq+jKm0i6c4/5Jqn7wPkGCVYDUApmriRKuMgKsbx8FSC4kYWsRBaDEOuFU2P8LiMHaJTVZVEhnSKlJelyi8CYK7if5U82A501kuYYFbDgd24BQunkFsKL881YZ7hBjnY/JzMIXxGfLtIyUq61SQQjpu1ccum9nw+8DoJ52jTFTulgfrLupi3InOKaRzjq1POnGiZyrXEedGCWvH4lb61fKlL9OYp5yExvPlClsdwLFq+3EZhwWkquWeCftvTECdjIX6k2wFCaFl9VnkF8RCPfQioVKdE2qk8mEUsQHIjEt/84q/qoJGl5pgw97sS/+JkYmB4eytrSFwP6H9uDrRRutAp2EMHPbmYUTvWeDEOwjaHLb1iChvkkxMDydY2bO1EHWrLXl0R4QT8lOub7WRKQywgtopNLJWc+FZtntOjb5YX7rLnrFSXH/G2nczSvWScNOzqNrXzS/y1SvDoFw2dm1gO8RXhYwwYPJPqLAmFMXEClAdScPehWn8qG9YV1KI/L1PTktYX4RxCUjSKbOMDZi4vP984fdo=
env:
  global:
  # NPM_TOKEN
  - secure: XQwHhT6Q6Q12wzGUQ0LQE7qnfPMQpIPJqfRyVKCDkNL6L5DFd/QMa94LrTgdQEt37sWi2FPsqApL4WaHQfNf9EvF+42MgCSEIkQXTm7Ngv7yWIYtrGRYOdvJ/SNn2XMfKysF0QDPsKJEMDfo8/jcuh82rzw/DUssBpI1GwJQH5QuE+gHIuRpZRR/2K7A8OnCCsdvJF0stSs0IegYd4eN08CPLpZIHVKqDYNKtlK0ZeqNZpcK21C2u0x5AYGpKgqCUIfLREOVcE43ljrCwxVDe0OTaLEENE8JTqWY9b6WsXUPcIXjj67QV8V2QQZltlaTkpHCcyVriyme1s7kdBebjoy6Ct48O2aDP2jPnlDMa2iXHFahB2JYhzgTM0xaNuKhZuXkfTjKcZCIow1XZn5XP7UR4Eocn5BjJZdeLGmzLUgeEPuozuYfN8pUaFiHDlbBLFarwolYbQ1Jil5+YVQhVGTv73kVhvvWisyxQUqzyv5G14aK2s5J4bKslamkARIuPT4iw+8RpXI1lnaCcdo0Agwp5Y5F3R39klso/RRd96RFT7xLllVHM863CZ0W/ebBn5XsXK7+ma4yCGcFsU5C4Gj3zDMuyTGLDYKneUr1P+SRGun8T9ksnQNvUuzAcDI8SALZVrArZ9F/mD0sb96lbBgWiwF+VAv7M86jjoeX6Uw=
  # GH_TOKEN
  - secure: hGJS1dCalL3yD9vU47P7GJAnHRGFmMUsYQnXXDrcu9LthNG228UuXJKrPBSElBoxu+g22NTBekHexG5rlJJ2ERRvynmdzCxc2XfQwydODf44xGqm19j/JL0cY/zTyi72daRubikFdEjEcsdKpAiMDpPk6E5Y+3RdrB34jba7lSEQiBqrkh4MnRgyouSuH/fI8Slj2L0dUDtyVtLnV89kFbgMImnh0Zvnk4H4xsN95mWvjwJQ6Dn6vSmptsfTDdGNstQRQc1lHV+RLVGtAL5hP+e8Wgh08M60ocXhE7tV00HgIWhsZTeESEJTsIlg77xFh2Ape8vGwLuI0+CR59i6qYJWuGzUqRcKdem53tcFU3eNXIiNIMZ5h9jHVxKChr3pYT2cYs1sNloF1xGkxhpctXVZ6KE/ghnww9QK6s33ouXHJI2GqatlBV8JTcVrJdRxkGFrcqdGZoC+bx10qVn38ib6zghH9Op9ZzQt5cJ8jL5JHmtz6DgfQQ4Y/INd41ExkVkJ0cllU4j+3CCZ4mPMHmluoM6oGl6S3Etxvv15EHyMMVACTwLiJGq8DTR5PtJ4Iv6sZNVvmDzyCdJmKwpFYZ46VJJxXMpifyndw8hUL0Ustskv4/wHFDmpZJMh21X0dOfd6aZ+QcuB5aZX3Eo0Cnyn+hGGao4cpMkYCxHZPSc=
